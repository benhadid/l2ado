<!DOCTYPE html>
<html>

  <head>
  
    <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-5KMKZK4Z38"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-5KMKZK4Z38');
  </script>
  

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title> Manipulations des données - Architecture des ordinateurs / Automne 2023 </title>
  <meta name="description" content="Objectifs      Apprendre à effectuer des manipulations de bits spécifiques grâce à des compositions d’opérations sur les bits.        Apprendre à identifier ...">
  

  <!--for gitlab pages -->
  

  <!-- automatic favicons -->
  

    <!--for github pages -->
  <link rel="shortcut icon" href="https://benhadid.github.io/l2ado/favicon.ico?"> 
  <!--for github-->

  <link rel="stylesheet" href="/l2ado/_css/main.css">
  <link rel="canonical" href="https://benhadid.github.io/l2ado/labs/02_lab">
  <link rel="alternate" type="application/rss+xml" title="Architecture des ordinateurs / Automne 2023 - " href="https://benhadid.github.io/l2ado/feed.xml" />

  <link rel='stylesheet' id='open-sans-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A300italic%2C400italic%2C600italic%2C300%2C400%2C600&#038;subset=latin%2Clatin-ext&#038;ver=4.2.4' type='text/css' media='all' />
  <link href='https://fonts.googleapis.com/css?family=Titillium+Web:600italic,600,400,400italic' rel='stylesheet' type='text/css'>

  

  

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

  <!-- MathJax -->
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper" style="z-index: 100;">
      <table><tr>
          <td><img width="75" src="/l2ado/_images/logo.png" valign="middle"></td>
          <td style="padding-left:10px;"><a class="schoolname" style="font-size: 15px;" class="site-title" href=""></a>
          <br/>
          <span style="margin-top: -2px;margin-bottom: -10px;" class="site-title"><a href="/l2ado/" title="Architecture des ordinateurs / Automne 2023 - "><b>Architecture des ordinateurs</a></b></span>
          <br/>
          <span class="coursesemeter" style="font-size: 12px;font-weight: bold;margin-top: 10px;display: block;">Automne 2023</span>
          </td>
        </tr></table>

    <nav class="site-nav">

      <a href="#" class="menu-icon menu.open">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>  

    <div class="trigger"><h1>Main Navigation</h1>

 <ul class="menu">
    
    <li>

      
      

      <a class="page-link" href="/l2ado/">
        <i class="fa fa-home fa-lg"></i> Accueil
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/schedule/">
        <i class="fas fa-calendar-alt"></i> Calendrier
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/lectures/">
        <i class="fas fa-book-reader"></i> Cours
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/discussions/">
        <i class="fas fa-user-graduate"></i> T. Dirigés
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/labs/">
        <i class="fas fa-laptop-code"></i> T. Pratiques
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/quizzes/">
        <i class="fas fa-question-circle"></i> Quiz
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/projects/">
        <i class="fas fa-user-graduate"></i> Projets
      </a>

    </li>
    
    <li>

      
      

      <a class="page-link" href="/l2ado/materials/">
        <i class="fas fa-book"></i> Ressources
      </a>

    </li>
    
</ul>


     </div>  
    </nav>

  </div>

  <div class="header-texture" style="height:100%; z-index: 0; position: absolute; top:0; right: 0; left: 0; 
  background-image: url('/l2ado/_images/pattern.png');" />

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Manipulations des données</h1>
    <p class="post-meta">Publié le
      <!--
      Sunday
      08/10/2023
      -->
      
      Dimanche
      8
      
      Octobre
      2023
    </p>
  </header>

  <div>
    
    <span style="font-weight: bold">Échéance :
      <!-- 15/10/2023 -->

      
      Dimanche
      15
      
      Octobre
      2023
    </span>
    

    <br />
    

    
    <p style="font-weight: bold">Télécharger

      

      
      [<a href="/l2ado/static_files/labs/lab_02.zip">démarrage</a>]
      

      
    </p>
        
  </div>

  <br />
  <article class="post-content">
    <h1 id="objectifs">Objectifs</h1>

<ul>
  <li>
    <p>Apprendre à effectuer des manipulations de bits spécifiques grâce à des compositions d’opérations sur les bits.</p>
  </li>
  <li>
    <p>Apprendre à identifier les problèmes potentiels en relation avec la gestion dynamique de la mémoire.</p>
  </li>
</ul>

<h1 id="exercice-1--bitops">Exercice 1 : (BitOps)</h1>

<p>Commencez par télécharger le fichier de démarrage (voir plus haut dans ce document) et décompressez son contenu dans le répertoire de votre choix. Implémentez ensuite dans le fichier <code class="language-plaintext highlighter-rouge">bit_ops.c</code> les fonctions de manipulation de bits<code class="language-plaintext highlighter-rouge"> get_bit()</code>, <code class="language-plaintext highlighter-rouge">set_bit()</code> et<code class="language-plaintext highlighter-rouge"> flip_bit()</code> (voir description ci-dessous). Vous pouvez utiliser <strong>UNIQUEMENT</strong> des <a href="/l2ado/static_files/docs/bitwise_operations_in_c.html">opérations de manipulation de bits</a> comme le <strong>ET</strong> (<code class="language-plaintext highlighter-rouge">&amp;</code>), le <strong>OU</strong> (<code class="language-plaintext highlighter-rouge">|</code>), le <strong>XOR</strong> (<code class="language-plaintext highlighter-rouge">^</code>), le <strong>NOT</strong> (<code class="language-plaintext highlighter-rouge">~</code>), le <strong>décalage à gauche</strong> (<code class="language-plaintext highlighter-rouge">&lt;&lt;</code>) et le <strong>décalage à droite</strong> (<code class="language-plaintext highlighter-rouge">&gt;&gt;</code>). Vous ne pouvez pas utiliser de boucles <code class="language-plaintext highlighter-rouge">for</code> / <code class="language-plaintext highlighter-rouge">while</code> / <code class="language-plaintext highlighter-rouge">do</code> ou les instructions de condition <code class="language-plaintext highlighter-rouge">if / else</code> et <code class="language-plaintext highlighter-rouge">switch / case</code>. Vous ne pouvez pas non plus utiliser les opérations arithmétiques ( modulo (%), division, soustraction, addition ou multiplication ) pour cet exercice.</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Retourne le n-ième bit de x.</span>
<span class="c1">// Vous pouvez considérer que 0 &lt;= n &lt;= 31</span>
<span class="n">bool</span> <span class="nf">get_bit</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="n">x</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">n</span><span class="p">);</span>

<span class="c1">// Fixe le n-ième bit de la valeur de x à v.</span>
<span class="c1">// Vous pouvez considérer que 0 &lt;= n &lt;= 31, et v est soit 0 ou 1</span>
<span class="kt">void</span> <span class="nf">set_bit</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">n</span><span class="p">,</span> <span class="n">bool</span> <span class="n">v</span><span class="p">);</span>

<span class="c1">// Inverse le n-ième bit de la valeur de x.</span>
<span class="c1">// Vous pouvez considérer que 0 &lt;= n &lt;= 31</span>
<span class="kt">void</span> <span class="nf">flip_bit</span><span class="p">(</span><span class="kt">uint32_t</span> <span class="o">*</span><span class="n">x</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">n</span><span class="p">);</span>
</code></pre></div></div>

<h2 id="tâches-à-réaliser-">Tâches à réaliser :</h2>

<p>Après avoir achevé l’implémentation des fonctions <code class="language-plaintext highlighter-rouge">get_bit()</code>, <code class="language-plaintext highlighter-rouge">set_bit()</code> et <code class="language-plaintext highlighter-rouge">flip_bit()</code>, vous pouvez compiler et exécuter le code fourni à l’aide des commandes ci-dessous (sous environnement UN*X).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>make bit_ops
<span class="nv">$ </span>./bit_ops
</code></pre></div></div>

<p>Une exécution corrècte du programme affichera sur votre écran le résultat de quelques tests de validation (tests qui vous permettent de vérifier si vous avez implémenté correctement les fonctions sus-citées).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Testing get_bit<span class="o">()</span>

get_bit<span class="o">(</span>0x0000004e,0<span class="o">)</span>: 0x00000000, correct
get_bit<span class="o">(</span>0x0000004e,1<span class="o">)</span>: 0x00000001, correct
get_bit<span class="o">(</span>0x0000004e,5<span class="o">)</span>: 0x00000000, correct
get_bit<span class="o">(</span>0x0000001b,3<span class="o">)</span>: 0x00000001, correct
get_bit<span class="o">(</span>0x0000001b,2<span class="o">)</span>: 0x00000000, correct
get_bit<span class="o">(</span>0x0000001b,9<span class="o">)</span>: 0x00000000, correct

Testing set_bit<span class="o">()</span>

set_bit<span class="o">(</span>0x0000004e,2,0<span class="o">)</span>: 0x0000004a, correct
set_bit<span class="o">(</span>0x0000006d,0,0<span class="o">)</span>: 0x0000006c, correct
set_bit<span class="o">(</span>0x0000004e,2,1<span class="o">)</span>: 0x0000004e, correct
set_bit<span class="o">(</span>0x0000006d,0,1<span class="o">)</span>: 0x0000006d, correct
set_bit<span class="o">(</span>0x0000004e,9,0<span class="o">)</span>: 0x0000004e, correct
set_bit<span class="o">(</span>0x0000006d,4,0<span class="o">)</span>: 0x0000006d, correct
set_bit<span class="o">(</span>0x0000004e,9,1<span class="o">)</span>: 0x0000024e, correct
set_bit<span class="o">(</span>0x0000006d,7,1<span class="o">)</span>: 0x000000ed, correct

Testing flip_bit<span class="o">()</span>

flip_bit<span class="o">(</span>0x0000004e,0<span class="o">)</span>: 0x0000004f, correct
flip_bit<span class="o">(</span>0x0000004e,1<span class="o">)</span>: 0x0000004c, correct
flip_bit<span class="o">(</span>0x0000004e,2<span class="o">)</span>: 0x0000004a, correct
flip_bit<span class="o">(</span>0x0000004e,5<span class="o">)</span>: 0x0000006e, correct
flip_bit<span class="o">(</span>0x0000004e,9<span class="o">)</span>: 0x0000024e, correct
</code></pre></div></div>

<h1 id="exercice-2--lfsr">Exercice 2 : (LFSR)</h1>

<p>Dans cet exercice, vous implémenterez une fonction <code class="language-plaintext highlighter-rouge">lfsr_calculate()</code> pour calculer la prochaine itération d’un registre à décalage à rétroaction linéaire <a href="https://fr.wikipedia.org/wiki/Registre_%C3%A0_d%C3%A9calage_%C3%A0_r%C3%A9troaction_lin%C3%A9aire">LFSR</a>. Les applications qui utilisent les LFSR sont: la télévision numérique, les téléphones portables CDMA, Ethernet, USB 3.0 et bien plus encore ! Dans <code class="language-plaintext highlighter-rouge">lfsr.c</code>, implémentez la fonction <code class="language-plaintext highlighter-rouge">lfsr_calculate()</code> pour qu’elle réalise l’opération illustrée ci-dessous :</p>

<p><img src="/l2ado/static_files/images/lfsr.gif" alt="LFSR" height="50%" width="50%" class="aligncenter" /></p>

<h2 id="explications-">Explications :</h2>
<ul>
  <li>
    <p>Si vous vous demandez à quoi sert cette fonction… elle est utilisée pour générer des nombres pseudo-aléatoires.</p>
  </li>
  <li>
    <p>A chaque appel à <code class="language-plaintext highlighter-rouge">lfsr_calculate()</code>, le contenu du registre est déplacé d’un bit vers la droite.</p>
  </li>
  <li>
    <p>Ce décalage n’est ni un décalage logique ni un <a href="https://fr.wikipedia.org/wiki/Op%C3%A9ration_bit_%C3%A0_bit#D%C3%A9calage_arithm%C3%A9tique">décalage arithmétique</a>. Sur le côté gauche, nous injectons un bit qui est égal au <strong>OU exclusif (XOR)</strong> des bits originaires des positions <strong>0</strong>, <strong>2</strong>, <strong>3</strong> et <strong>5</strong>.</p>
  </li>
  <li>
    <p>Dans l’image ci-dessus, le symbole rouge illustrant un signe <code class="language-plaintext highlighter-rouge">plus dans un cercle</code> représente un <strong>OU exclusif</strong>. Rappelons que cet opérateur prend deux entrées <code class="language-plaintext highlighter-rouge">{a , b}</code> et réalise l’opération <code class="language-plaintext highlighter-rouge">a ^ b</code>.</p>
  </li>
  <li>
    <p>Si vous avez implémenté correctement <code class="language-plaintext highlighter-rouge">lfsr_calculate()</code>, la fonction devrait afficher tous les 65535 entiers positifs sur 16 bits avant de revenir au nombre initial de départ.</p>
  </li>
  <li>
    <p>Notez que le bit le plus à gauche est le MSB (bit de poids fort) et le bit le plus à droite est le LSB (bit de poids faible).</p>
  </li>
</ul>

<h2 id="tâches-à-réaliser--1">Tâches à réaliser :</h2>

<p>Implémentez la fonction <code class="language-plaintext highlighter-rouge">lfsr_calculate()</code> dans le fichier <code class="language-plaintext highlighter-rouge">lfsr.c</code> puis compilez et exécutez le programme (à l’aide de la commande <code class="language-plaintext highlighter-rouge">make</code> sous UN*X - voir ci-dessous). Vérifiez que le résultat affiché sur votre écran ressemble à ce qui suit :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>make lfsr
<span class="nv">$ </span>./lfsr

My number is: 1
My number is: 5185
My number is: 38801
My number is: 52819
My number is: 21116
My number is: 54726
My number is: 26552
My number is: 46916
My number is: 41728
My number is: 26004
My number is: 62850
My number is: 40625
My number is: 647
My number is: 12837
My number is: 7043
My number is: 26003
My number is: 35845
My number is: 61398
My number is: 42863
My number is: 57133
My number is: 59156
My number is: 13312
My number is: 16285
 ... etc etc ...
Got 65535 numbers before cycling!
Congratulations! It works!
</code></pre></div></div>

<h1 id="exercise-3--accès-mémoire">Exercise 3 : (Accès mémoire)</h1>

<p>Cet exercice est conçu pour vous aider à vous familiariser avec les structures de données et la manipulation des pointeurs (c-à-d. adresses mémoires) dans le langage C. Les fichiers <code class="language-plaintext highlighter-rouge">vector.h</code>, <code class="language-plaintext highlighter-rouge">vector-test.c</code> et <code class="language-plaintext highlighter-rouge">vector.c</code> implémentent des fonctionnalités pour gérer des tableaux de longueur variable.</p>

<h2 id="tâches-à-réaliser--2">Tâches à réaliser :</h2>

<ul>
  <li>
    <p>Expliquez pourquoi <code class="language-plaintext highlighter-rouge">bad_vector_new()</code> et <code class="language-plaintext highlighter-rouge">also_bad_vector_new()</code> sont de mauvaises implémentations et complétez les fonctions <code class="language-plaintext highlighter-rouge">vector_new()</code>, <code class="language-plaintext highlighter-rouge">vector_get()</code>, <code class="language-plaintext highlighter-rouge">vector_delete()</code> et <code class="language-plaintext highlighter-rouge">vector_set()</code> dans <code class="language-plaintext highlighter-rouge">vector.c</code>.</p>
  </li>
  <li>
    <p>Insérez également les prototypes de ces fonctions dans le fichier entête <code class="language-plaintext highlighter-rouge">vector.h</code> afin que le code de test <code class="language-plaintext highlighter-rouge">vector-test.c</code> puisse s’exécuter sans aucune erreur.</p>
  </li>
  <li>
    <p>Enfin, implémentez une règle pour la cible <code class="language-plaintext highlighter-rouge">vector-test</code> dans le fichier « Makefile ».</p>
  </li>
</ul>

<p>Consultez les fonctions déjà implémentées et les commentaires fournis pour voir comment les structures de données doivent être manipulées.</p>

<p>Par souci de cohérence, il est supposé que toutes les entrées du vecteur sont égales à <code class="language-plaintext highlighter-rouge">0</code> à moins qu’elles ne soient explicitement définies ou modifiées par l’utilisateur. Rappelez-vous de cela parce que la fonction <code class="language-plaintext highlighter-rouge">malloc()</code> ne met pas à zéro la mémoire qu’elle alloue.</p>

<p>Pour expliquer pourquoi les deux mauvaises fonctions sont incorrectes, gardez à l’esprit que l’une de ces fonctions s’exécutera correctement mais il peut y avoir d’autres problèmes (invisibles).</p>

<p>Vérifiez votre implémentation de <code class="language-plaintext highlighter-rouge">vector_new()</code>, <code class="language-plaintext highlighter-rouge">vector_get()</code>, <code class="language-plaintext highlighter-rouge">vector_delete()</code> et <code class="language-plaintext highlighter-rouge">vector_set()</code> par rapport à l’exactitude des résultats et aussi par rapport à la gestion corrècte de la mémoire (détails ci-dessous).</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 1) pour vérifier l'exactitude des résultats</span>
<span class="nv">$ </span>make vector-test
<span class="nv">$ </span>./vector-test

<span class="c"># 2) pour vérifier la gestion de la mémoire avec Valgrind</span>
<span class="nv">$ </span>make vector-memcheck
</code></pre></div></div>

<p>La <a href="https://www.gnu.org/software/make/manual/make.html#Rule-Introduction">règle</a> <code class="language-plaintext highlighter-rouge">vector-memcheck</code> dans le fichier ‘Makefile’ permet d’exécuter la commande suivante de <code class="language-plaintext highlighter-rouge">valgrind</code> sur un fichier <code class="language-plaintext highlighter-rouge">executable</code>.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>valgrind <span class="nt">--tool</span><span class="o">=</span>memcheck <span class="nt">--leak-check</span><span class="o">=</span>full <span class="nt">--track-origins</span><span class="o">=</span><span class="nb">yes</span> <span class="o">[</span>OS SPECIFIC ARGS] ./&lt;executable&gt;
</code></pre></div></div>

<p>Que signifie chacun des paramètres dans la commande précédente (<strong>Indication :</strong> Comment obtenir de l’aide sur une instruction sous UN*X) ? La dernière ligne affichée par <code class="language-plaintext highlighter-rouge">valgrind</code> vous indiquera en un coup d’œil s’il y a eu des erreurs pendant l’exécution de votre programme. Voici un exemple de sortie d’un programme bogué :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==</span><span class="nv">47132</span><span class="o">==</span> ERROR SUMMARY: 1200039 errors from 24 contexts <span class="o">(</span>suppressed: 18 from 18<span class="o">)</span>
</code></pre></div></div>

<p>Si votre programme comporte des erreurs, vous pouvez faire défiler la sortie de la ligne de commande pour afficher les détails de chacune des erreurs. Pour cet exercice, vous pouvez ignorer toutes les sorties faisant référence à des erreurs supprimées (<em>anglais</em> : suppressed). Dans un programme sans problèmes de mémoire, votre sortie ressemblera à ceci :</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">==</span><span class="nv">44144</span><span class="o">==</span> ERROR SUMMARY: 0 errors from 0 contexts <span class="o">(</span>suppressed: 18 from 18<span class="o">)</span>
</code></pre></div></div>

<p>Au final, n’hésitez pas à utiliser également CGDB ou à ajouter des instructions <code class="language-plaintext highlighter-rouge">printf</code> à <code class="language-plaintext highlighter-rouge">vector.c</code> et <code class="language-plaintext highlighter-rouge">vector-test.c</code> pour déboguer votre code.</p>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <!--     <h2 class="footer-heading"></h2> -->
    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">

        <p class="text">
          02 rue Didouche Mourad<br />
16000 Alger<br />
 
        </p>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">


          

          

          

          

          
          




        </ul>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
